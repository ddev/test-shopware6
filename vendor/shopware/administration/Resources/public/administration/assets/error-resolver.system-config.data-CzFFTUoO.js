var m=Object.defineProperty;var w=(t,r,e)=>r in t?m(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var d=(t,r,e)=>w(t,typeof r!="symbol"?r+"":r,e);import{S as l}from"./extension-api-data.service-B9MeACBR.js";const{string:S}=Shopware.Utils,E=class E{constructor(){d(this,"merge");this.merge=Shopware.Utils.object.merge}handleWriteErrors(r){if(!r)throw new Error("[error-resolver] handleWriteError was called without errors");const e=this.reduceErrorsByWriteIndex(r);e.systemError.length>0&&this.addSystemErrors(e.systemError),this.handleErrors(e.apiError)}cleanWriteErrors(){Shopware.Store.get("error").resetApiErrors()}reduceErrorsByWriteIndex(r){const e={systemError:[],apiError:{}};return r.forEach(o=>{if(!o.source||!o.source.pointer){const s=new l({code:o.code,meta:o.meta,detail:o.detail,status:o.status});e.systemError.push(s);return}const a=o.source.pointer.split("/");a[0]===""&&a.shift();const h={},p=a.length-1;a.reduce((s,i,c)=>i==="translations"||a[c-1]==="translations"?s:(c===p?s[i]=new l(o):s[i]={},s[i]),h),e.apiError=this.merge(e.apiError,h)}),e}addSystemErrors(r){r.forEach(e=>{Shopware.Store.get("error").addSystemError({error:e})})}handleErrors(r){Object.keys(r).forEach(e=>{Shopware.Store.get("error").addApiError({expression:this.getErrorPath(e),error:r[e]})})}getErrorPath(r){return r=S.camelCase(r),`${E.ENTITY_NAME}.${r}`}};d(E,"ENTITY_NAME","SYSTEM_CONFIG");let n=E;export{n as E};
