import{bd as d,b9 as l,be as c,bh as _,bi as f,bj as g,a as b}from"./channel-DB_OaefQ.js";var o,s;function w(){if(s)return o;s=1;var t=d(),i=l(),e=c(),r=_(),p=f(),u=g(),m=e(function(n){var a=u(n);return p(a)&&(a=void 0),r(t(n,1,p,!0),i(a,2))});return o=m,o}var y=w();const q=b(y),x=`{% block sw_import_export_new_profile_wizard_mapping_page %} <div class="sw-import-export-new-profile-wizard-mapping-page"> {% block sw_import_export_new_profile_wizard_mapping_page_text %} <p class="sw-import-export-new-profile-wizard-mapping-page__text"> <template v-if="automatedCount < 1"> {{ $tc('sw-import-export.profile.mappingDescription') }} </template> <template v-else> {{ $tc('sw-import-export.profile.mappingAutomatedDescription', { automatedCount }, 0) }} </template> </p> {% endblock %} {% block sw_import_export_new_profile_wizard_mapping_page_mapping %} <sw-import-export-edit-profile-modal-mapping class="sw-import-export-new-profile-wizard-mapping-page__mapping" :profile="profile" :system-required-fields="systemRequiredFields" @update-mapping="updateMapping" /> {% endblock %} </div> {% endblock %}`,k={template:x,inject:["repositoryFactory"],emits:["next-allow"],props:{profile:{type:Object,required:!0},systemRequiredFields:{type:Object,required:!0}},data(){return{automatedCount:0}},created(){this.createdComponent()},methods:{createdComponent(){this.automatedCount=this.countAutomatedValues(),this.mergeMappings(),this.$emit("next-allow")},mergeMappings(){const t=Object.entries(this.systemRequiredFields).map(e=>{const[r,p]=e;return{key:r,mappedKey:p}}),i=q(this.profile.mapping,t,"key");i.sort((e,r)=>e.position-r.position),this.profile.mapping=i.map((e,r)=>(e.position||(e.position=r),e))},updateMapping(t){this.profile.mapping=t},countAutomatedValues(){return this.profile.mapping.reduce((t,i)=>(i.key!==void 0&&i.key!==null&&i.key!==""&&(t+=1),t),0)}}};export{k as default};
